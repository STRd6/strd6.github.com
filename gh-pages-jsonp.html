<!DOCTYPE html>

<html>
<head>
  <title>gh-pages-jsonp</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="http://strd6.github.io/cdn/parallel/docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    <ul class="sections">
        
        
        <li id="section-1">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="using-jsonp-with-github-pages">Using JSONP with Github Pages</h1>

            </div>
            <div class="content"><pre><code>
</code></pre>
</div>
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Here&#39;s neat trick, hosting JSON data on Github Pages that is available cross
domain via JSONP.</p>
<h2 id="what-is-jsonp">What is JSONP</h2>

            </div>
            <div class="content"><pre><code>
</code></pre>
</div>
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Traditionally JSONP was used to circumvent the
<a href="http://en.wikipedia.org/wiki/Same-origin_policy">same origin policy</a> in
JavaScript. AJAX requests were limited in what sites they could make requests to
but <code>&lt;script&gt;</code> tags did not have such restrictions imposed.</p>
<p>You can fake a cross orgin request by loading a script tag with a known
callback function. Many web services support JSONP by allowing for a
<code>callback=someFunction</code> parameter to be sent in the query string.</p>
<p>Here is an example URL from Google Docs
<a href="https://spreadsheets.google.com/feeds/list/o13394135408524254648.240766968415752635/od6/public/basic?alt=json-in-script&amp;callback=someFunction">https://spreadsheets.google.com/feeds/list/o13394135408524254648.240766968415752635/od6/public/basic?alt=json-in-script&amp;callback=someFunction</a></p>
<p>Notice the <code>callback=someFunction</code> parameter. Go view that URL and you will
notice that it is simply a script with the function with the given name being
called with the data as a parameter.</p>
<h2 id="using-jsonp-on-github-pages">Using JSONP on Github Pages</h2>

            </div>
            <div class="content"><pre><code>
</code></pre>
</div>
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              <div class="pilwrap">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Ideally you could just store a <code>.json</code> file in the <code>gh-pages</code> branch of your
repo but unfortunately Github doesn&#39;t allow for setting CORS options on Github
Pages. Maybe they will in the future but until then we need to simulate the
process.</p>
<p>The tricky part is that all gh-pages files are served statically, so the
regular method of passing a callback in the querystring will have no effect.</p>
<p>There is a simple way to get around this. Because all your files are static and
you know the path where they are located, you can construct them to enable
static JSONP.</p>
<p>The pattern I settled on was <code>&lt;account&gt;/&lt;repo&gt;:&lt;ref&gt;</code> for example <code>STRd6/md:v0.3.2</code>.</p>
<p>That file is hosted here: <a href="http://strd6.github.io/md/v0.3.2.json.js">http://strd6.github.io/md/v0.3.2.json.js</a></p>
<p>I use <code>.json.js</code> as the file extension so that Github&#39;s server can reasonably
guess the MIME type and apply the correct compression.</p>
<p>You will notice that the function which is invoked is <code>STRd6/md:v0.3.2</code>. It
doesn&#39;t matter that the function has special characters in it, but you need to
make sure to access it as <code>window[&quot;STRd6/md:v0.3.2&quot;](...jsonData...)</code> because it
can&#39;t be invoked like a regularly named function.</p>
<p>To read this file from a web page using jQuery:</p>
<blockquote>
<pre><code>$.ajax({
  url: &quot;http://strd6.github.io/md/v0.3.2.json.js&quot;,
  dataType: &quot;jsonp&quot;,
  jsonpCallback: &quot;STRd6/md:v0.3.2&quot;
  success: function(data) { ... }
})</code></pre>
</blockquote>
<p>Et voila! Now you can retrieve JSON data from Github Pages accross domains.</p>
<p><a href="/">Back to danielx.net</a></p>

            </div>
            <div class="content"><pre><code>
</code></pre>
</div>
        </li>
        
    </ul>
  </div>
  <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.3/coffee-script.min.js"></script>
<script src="http://www.danielx.net/require/v0.2.2.js"></script><script>
  $.ajax({
    url: "http://strd6.github.io/interactive/v0.8.1.jsonp",
    dataType: "jsonp",
    jsonpCallback: "STRd6/interactive:v0.8.1",
    cache: true
  }).then(function(PACKAGE) {
    Require.generateFor(PACKAGE)("./" + PACKAGE.entryPoint)
  })
</script><script src="package.js"></script>
</body>
</html>